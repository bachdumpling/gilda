{% # Home section: pulls products from a collection and shows a 2x2 grid %}
{% liquid
  assign chosen_collection = section.settings.collection | default: collections['all']
%}

<section class="home-grid w-full">
  <div class="product-grid border-y border-black divide-y divide-black sm:divide-y-0 sm:grid sm:grid-cols-2">
    {% for product in chosen_collection.products limit: 4 %}
      <div class="product-card flex justify-center items-center flex-col w-full">
        {% comment %} image {% endcomment %}
        <div class="w-[60%] sm:w-[40%] py-6">
          {% if product.featured_image %}
            {% render 'image' 
              , image: product.featured_image
              , url: product.url
              , class: 'aspect-square'
              , width: 2000
              , height: 2000
              , crop: 'center' %}
          {% else %}
            <a href="{{ product.url }}" class="block aspect-square">
              {{ 'image' | placeholder_svg_tag }}
            </a>
          {% endif %}
        </div>
        {% comment %} title {% endcomment %}
        <div class="py-6 text-sm md:text-sm lg:text-[15px] xl:text-base 2xl:text-xl text-center">
          <a href="{{ product.url }}" class="block transition-all duration-200">
            {% render 'product-code'
              , product: product
              , class: 'cursor-pointer'
              , animation_duration: 100 %}
          </a>
        </div>
      </div>
    {% else %}
      <div class="col-span-2 py-12 text-center text-xs md:text-base opacity-70">No products found.</div>
    {% endfor %}
  </div>
</section>

{% stylesheet %}
  /* Desktop 2x2 grid borders */
  @media (min-width: 640px) {
    .product-grid .product-card {
      border-color: black;
      border-style: solid;
    }

    /* Top row */
    .product-grid .product-card:nth-child(1),
    .product-grid .product-card:nth-child(2) {
      border-top-width: 0;
      border-bottom-width: 0.5px;
    }

    /* Bottom row */
    .product-grid .product-card:nth-child(3),
    .product-grid .product-card:nth-child(4) {
      border-top-width: 0.5px;
      border-bottom-width: 0;
    }

    /* Left column */
    .product-grid .product-card:nth-child(odd) {
      border-right-width: 0;
      border-left-width: 0;
    }

    /* Right column */
    .product-grid .product-card:nth-child(even) {
      border-left-width: 1px;
      border-right-width: 0;
    }
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "Home",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "Home"
      }
    ]
  }
{% endschema %}