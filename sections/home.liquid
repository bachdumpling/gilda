{% # Home test section: pulls products from a collection and shows a 2x2 grid %}
{% liquid
  assign chosen_collection = section.settings.collection | default: collections['all']
%}

<section class="w-full">
  <div class="grid grid-cols-1 sm:grid-cols-2">
    {% for product in chosen_collection.products limit: 4 %}
      {% liquid
        assign item_index = forloop.index
        assign border_classes = ''
        # Mobile (grid-cols-1): Each product gets border-top, last gets border-bottom too
        assign mobile_classes = 'border-t border-black'
        if forloop.last
          assign mobile_classes = mobile_classes | append: ' border-b'
        endif

        # Desktop (sm: grid-cols-2): 2x2 grid with shared borders
        case item_index
          when 1
            assign desktop_classes = 'sm:border-t-1 sm:border-b-[0.5px] sm:border-r-[0.5px] sm:border-black'
          when 2
            assign desktop_classes = 'sm:border-t-1 sm:border-b-[0.5px] sm:border-l-[0.5px] sm:border-black'
          when 3
            assign desktop_classes = 'sm:border-t-[0.5px] sm:border-b-1 sm:border-r-[0.5px] sm:border-black'
          when 4
            assign desktop_classes = 'sm:border-t-[0.5px] sm:border-b-1 sm:border-l-[0.5px] sm:border-black'
        endcase

        assign border_classes = mobile_classes | append: ' ' | append: desktop_classes
      %}
      <div class="{{ border_classes }} flex justify-center items-center flex-col w-full">
        {% comment %} image {% endcomment %}
        <div class="w-[40%] py-6">
          <a href="{{ product.url }}" class="block">
            {% if product.featured_image %}
              {% render 'image' 
                , image: product.featured_image
                , width: 2000 %}
            {% else %}
              {{ 'image' | placeholder_svg_tag }}
            {% endif %}
          </a>
        </div>
        {% comment %} title {% endcomment %}
        <div class="py-6 text-sm sm:text-sm lg:text-base tracking-widest text-center">
          <a href="{{ product.url }}" class="block hover:opacity-80 hover:underline transition-all duration-200">
            {% render 'product-code'
              , product: product
              , class: 'cursor-pointer'
              , animation_duration: 250 %}
          </a>
        </div>
      </div>
    {% else %}
      <div class="col-span-2 py-12 text-center text-xs md:text-base opacity-70">No products found.</div>
    {% endfor %}
  </div>
</section>

{% schema %}
  {
    "name": "Home",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "Home"
      }
    ]
  }
{% endschema %}